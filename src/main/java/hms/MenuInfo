package hms;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.Scanner;
import hms.CustomerInfo;

public class MenuInfo {
    int inPut = 0 ;                           // 번호를 선택하기 위해 필요한 함수    
    int customerCardNumber = 0 ;              // int 유형 손님 카드 번호
    int foodCharge;                           //음식 가격
    int customerCharge = 0 ;                  //손님이 음식 값을 지불하기 위해 낸 금액
    int roomNum = 0 ;                         //객실 번호
    int sendCharge;                           //방 값으로 청구할 요금
    
    String customerName;                                 // 고객 이름
    String customerCardNumberString = null ;             //string 유형 손님 카드 번호
    String foodChargeType;                               //음식 결제 유형
    String foodReservation;                              //레스토랑 예약 유무
    String foodList;                                     //음식 리스트
    
    MenuInfo[] menu = new MenuInfo[1000];    
    Scanner sc = new Scanner(System.in); 
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    
    void RestaurantReservation() throws FileNotFoundException, UnsupportedEncodingException, IOException {                //레스토랑,룸서비스 예약 
        BufferedWriter cf = new BufferedWriter(new FileWriter("CumtomFile.txt", true));
        String str = "레스토랑 예약이 완료되었습니다" ;
        String strr = "레스토랑 예약이 취소되었습니다";
        
        while(true){
            System.out.println("레스토랑 및 룸서비스를 예약 하시겠습니까?");
            System.out.println("1.예                           2.아니요");
            inPut = sc.nextInt();
                      
            if(inPut==1){
                System.out.println("레스토랑 예약 : y");
                cf.write(str);                
                break;
            }
            else if (inPut==2){
                System.out.println("레스토랑 예약 : n");
                cf.write(strr);
                break;
            }
            else{
                System.out.println("잘못 입력 하였습니다");
            }
        }   
       
        cf.close();
        br.close();
    }
    
    void FoodList()throws FileNotFoundException, UnsupportedEncodingException, IOException{
        String search = "" ;
        String str = "";
        int j;
        BufferedWriter cf = new BufferedWriter(new FileWriter("CumtomFile.txt", true));


        System.out.println("식사를 추적할 고객의 이름을 입력하세요 ");
        search = br.readLine();         
        for (int i = 0; i < 1000; i++) {  // 고객의 이름의 인덱스 찾기
            if (search.equals(menu[i].customerName)) {
                j = i;
                break;
            }
        }
        
        str = String.format("%s/%s",customerName,foodList);
        
        
        br.close();
        cf.close();
        
    }
    public void PaymentType()throws FileNotFoundException, UnsupportedEncodingException, IOException{ // 음식 결제 유형
        
        BufferedWriter cf = new BufferedWriter(new FileWriter("CumtomFile.txt", true));
        String str = "카드 결제";
        String strr = "현금 결제";

        
        while(true){
            System.out.println("결제 유형을 선택하세요");
            System.out.println("1.카드         2. 현금");

            inPut = sc.nextInt();
            
            if(inPut == 1){
                while(true){
                System.out.print("카드번호 16자리를 입력해주세요.(번호만 입력해 주세요): ");
                customerCardNumber=sc.nextInt();
                customerCardNumberString=Integer.toString(customerCardNumber);                
                
                if(customerCardNumberString.length() != 16){
                    System.out.println("잘못입력하였습니다.");
                    continue;
                    }
                    else{
                    System.out.println("결제 완료되었습니다.");
                    
                    cf.write(str);
                    break;
                    }
                }
            }
            else if(inPut == 2){
                while(true){
                    System.out.print("지불할 액수를 입력해주세요.: ");
                    foodCharge=sc.nextInt();
                    System.out.print("고객이 지불한 금액을 입력해주세요 ");
                    customerCharge=sc.nextInt();
                
                    if(foodCharge>customerCharge){
                        System.out.println("금액이 부족합니다. ");
                        continue;
                    }
                    else{
                        System.out.println("결제 완료되었습니다.");
                        System.out.printf("거스름돈: %d \n", customerCharge - foodCharge);
                        cf.write(strr);
                        break;
                    }
                }
            }                   
        break;
        }
    br.close();
    cf.close();    
    }
    
    void Bill()throws FileNotFoundException, UnsupportedEncodingException, IOException{
        BufferedWriter cf = new BufferedWriter(new FileWriter("CumtomFile.txt", true));
        String search;
        int j;
        
        System.out.println("서비스 시점에서 결제가 되지않아 객실에 대해 요금청구하실 고객의 방번호를 입력하세요 ");
        search = br.readLine(); 
           
        for (int i = 0; i < 1000; i++) {  // 고객의 방번호 인덱스 찾기            
            if (search.equals(menu[i].roomNum)) {
                j = i;
                break;
            }
        }
        //추가 예정
        
        
        
        br.close();
        cf.close();
    }
}
